{% extends 'core/base_main.html' %}

{% block modals %}
{% endblock %}

{% block nav_links_desktop %}
<ul class="right hide-on-med-and-down">
    {% if user.is_anonymous %}
    <li>
        <a href="#modal-login" class="waves-effect waves-light btn white green-text-button modal-trigger hoverable">
            Login</a>
    </li>
    <li>
        <a href="#modal-register" class="waves-effect waves-light btn white green-text-button modal-trigger">
            Cadastre-se</a>
    </li>
    <li>
        <a href="#modal-check-ticket" class="waves-effect waves-light btn white green-text-button modal-trigger">
            Consultar Bilhete</a>
    </li>
    {% else %}
    <li class="user-logged-name">Olá, {{user}}</li>
    {% if is_seller %}
    <li>
        <a href="{% url 'user:user_seller_home' %}" class="waves-effect waves-light btn white green-text-button ">
            Painel do Vendedor</a>
    </li>
    {% endif %}

    {% if not is_seller and  not user.is_superuser %}
    <li>
        <a href="{% url 'user:user_seller_home' %}" class="waves-effect waves-light btn white green-text-button ">
            Painel do Vendedor</a>
    </li>
    {% endif %}

    {% if user.is_superuser %}
    <li>
        <a href="/admin/" class="waves-effect waves-light btn white green-text-button ">
            Administração</a>
    </li>
    {% endif %}

    <li>
        <a href="{% url 'user:user_logout' %}" class="waves-effect waves-light btn white green-text-button ">
            logout</a>
    </li>
    {% endif %}

</ul>
{% endblock %}

{% block nav_links_mobile %}
<ul class="side-nav" id="mobile-menu">
    {% if user.is_anonymous %}
    <li>
        <a href="#modal-login" class="waves-effect waves-light btn white green-text-button modal-trigger">
            Login</a>
    </li>
    <li>
        <a href="#modal-register" class="waves-effect waves-light btn white green-text-button modal-trigger">
            Cadastre-se</a>
    </li>
    <li>
        <a href="#modal-check-ticket" class="waves-effect waves-light btn white green-text-button modal-trigger">
            Consultar Bilhete</a>
    </li>
    {% else %}
    <li class="user-logged-name user-logged-mobile">Olá, {{user}}</li>
    {% if is_seller %}
    <li>
        <a href="{% url 'user:user_seller_home' %}" class="waves-effect waves-light btn white green-text-button ">
            Painel do Vendedor</a>
    </li>
    {% endif %}
    {% if not is_seller and  not user.is_superuser %}
    <li>
        <a href="{% url 'user:user_seller_home' %}" class="waves-effect waves-light btn white green-text-button ">
            Voltar</a>
    </li>
    {% endif %}

    {% if user.is_superuser %}
    <li>
        <a href="/admin/" class="waves-effect waves-light btn white green-text-button ">
            Administração</a>
    </li>
    {% endif %}

    <li>
        <a href="{% url 'user:user_logout' %}" class="waves-effect waves-light btn white green-text-button ">
            logout</a>
    </li>
    {% endif %}
</ul>
{% endblock %}

{% block content %}
<div class="col s12 l10">
    <div class="games-table-container">
    {% if bet_tickets %}
        <table class="bordered highlight white centered games-table hoverable">
            <thead>
                <tr>
                    <th>Número do Ticket</th>
                    <th>Data da aposta</th>
                    <th>Status</th>
                    <th>Status Pagamento</th>
                    <th>Ver</th>
                </tr>
            </thead>
            <tbody>
                {% for ticket in bet_tickets %}
                <tr>
                    <td>
                        # {{ ticket.pk }}
                    </td>
                    <td>
                        {{ ticket.creation_date }}
                    </td>
                    <td>
                        {{ ticket.bet_ticket_status }}
                    </td>
                    <td>
                        {{ ticket.payment.status_payment }}
                    </td>
                    <td>
                        <a href="{% url 'core:core_ticket_get' pk=ticket.pk %}"><i class="medium-icon material-icons">open_in_new</i> </a>
                        </td>
                </tr>
                {% empty %}
                <div class="empty_game_set">
                    Você ainda não pagou nenhuma aposta.
                </div>
                {% endfor %}
            </tbody>
        </table>
        {% else %}
        <div class="empty_game_set">
            Você não fez nenhuma aposta.
        </div>
        {% endif %}
    </div>
    <div class="row">
            <ul class="pagination center">
                <span class="step-links">                                                                     
                    {% if bet_tickets.has_previous%}
                        <li class="waves-effect"><a href="?page={{ bet_tickets.previous_page_number }}"><i class="material-icons">chevron_left</i></a></li>
                    {% endif %}                                    
                    
                    {%for page in page_range%}
                        {% if page == bet_tickets.number %}                                    
                            <li class="active" ><a href="?page={{page}}">{{page}}</a></li>
                        {% else %}
                            <li class="waves-effect"><a href="?page={{page}}">{{page}}</a></li>
                        {% endif %}
                    {%endfor%}                                

                    {% if bet_tickets.has_next%}
                        <li class="waves-effect"><a href="?page={{ bet_tickets.next_page_number }}"><i class="material-icons">chevron_right</i></a></li>
                    {% endif %}   
                </span>                                                                   
            </ul>
    </div>
</div>
{% endblock %}