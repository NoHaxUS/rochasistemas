{% extends 'core/base_main.html' %}

{% block modals %}

<!-- Adicioanar Vendedor -->
<div id="modal-manager-permissions" class="modal">
    <div class="modal-content">
        <a href="#" class="modal-close">
            <i class="material-icons right">close</i>
        </a>
        <h4>Adicionar Vendedor</h4>
        <div class="row">
            <form id="modal-add-permissions" method="POST">
                {% csrf_token %}                 
                <div class="row">
                    <div class="input-field col s12">                                                
                        <input name="vendedor" id="vendedor_id" type="text" class="validate" tabindex="2">
                        <input name="gerente" type="hidden" id="gerente_id" />
                        <label for="id">ID Vendedor</label>
                    </div>
                </div>
                <div class="row">
                    <div class="col s12">
                        <button class="btn waves-effect waves-light right" type="submit" tabindex="3">Adicionar</button>
                    </div>
                </div>
            </form>
        </div>
    </div>
</div>
<!-- Adicioanar Vendedor -->

<!-- Remover Vendedor -->
<div id="modal-remove-permissions-modal" class="modal">
    <div class="modal-content">
        <a href="#" class="modal-close">
            <i class="material-icons right">close</i>
        </a>
        <h4>Remover Vendedor</h4>
        <div class="row">
            <form id="modal-remove-permissions" method="POST">
                {% csrf_token %}                 
                <div class="row">
                    <div class="input-field col s12">                                                
                        <input name="vendedor" id="vendedor_id" type="text" class="validate" tabindex="2">
                        <input name="gerente" type="hidden" id="gerente_id" />
                        <label for="id">ID Vendedor</label>
                    </div>
                </div>
                <div class="row">
                    <div class="col s12">
                        <button class="btn waves-effect waves-light right" type="submit" tabindex="3">Adicionar</button>
                    </div>
                </div>
            </form>
        </div>
    </div>
</div>
<!-- Remover Vendedor -->


{% endblock %}

{% block nav_links_desktop %}
<ul class="right hide-on-med-and-down">
    <li class="user-logged-name">Olá, {{user}}</li>
    <li>
        <a href="{% url 'core:core_home' %}" class="waves-effect waves-light btn white green-text-button">
            Início</a>
    </li>
    <li>
        <a href="{% url 'user:user_logout' %}" class="waves-effect waves-light btn white green-text-button">
            Logout</a>
    </li>
</ul>
{% endblock %}

{% block nav_links_mobile %}
<ul class="side-nav" id="mobile-menu">    
    <li class="user-logged-name user-logged-mobile">Olá, {{user}}</li>
    <li>
        <a href="{% url 'core:core_home' %}" class="waves-effect waves-light btn white green-text-button">
            Início</a>
    </li>
    <li>
        <a href="{% url 'user:user_logout' %}" class="waves-effect waves-light btn white green-text-button">
            Logout</a>
    </li>
</ul>
{% endblock %}


{% block mobile_menus %}
<div class="col s12 center-align hide-on-large-only">
    <ul class="collapsible" data-collapsible="accordion">
        <li>
            <div class="collapsible-header collapsible-header-mobile">
                <i class="material-icons">play_circle_outline</i>Menu</div>
            <div class="collapsible-body white">
                <ul class="championship-list">

                    <li class="center-align">
                        <a href="#" class="">Vendedores</a>
                    </li>                    
                </ul>
            </div>
        </li>
    </ul>
</div>
{% endblock %}

{% block left_section_desktop %}
{% endblock %}

{% block content %}

<div class="row main-section">
    <div class="col s2 hide-on-med-and-down white hoverable">
        <div class="section-header white-text center-align">
            Menu
        </div>
        <ul class="championship-list">
            {% for item in management_list %}
            <li class="center-align valign-wrapper">
                <a href="#" class="modal-trigger">{{item}}</a>
            </li>         
            {% endfor %}   
        </ul>
    </div>
    <div class="col s12 l10">                
        <div class="games-table-container">
            {% if gerentes %}
            <table class="bordered highlight white centered games-table hoverable">
                <thead>
                    <tr>
                        <th>ID Gerente</th>
                        <th>Nome</th>
                        <th>Telefone</th>                        
                        <th>Saldo</th>    
                        <th>Adicionar/Remover Vendedor</th>  
                    </tr>
                </thead>
                <tbody>
                    {% for gerente in gerentes %}
                    <tr>
                        <td>
                            # {{ gerente.pk }}
                        </td>
                        <td>
                            {{ gerente.first_name }}
                        </td>
                        <td>
                            {{ gerente.cellphone }}
                        </td>                        
                        <td>
                            {{ gerente.credit_limit_to_add }}
                        </td>
                        <td>
                        <button class="btn btn-primary modal-permission" 
                            data-toggle="modal" data-id="{{ gerente.pk }}">Adicionar</button>
                        <button class="btn btn-primary modal-permission red" 
                                data-toggle="modal" data-id="{{ gerente.pk }}">Remover</button>
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>                            
            </table>
            {% else %}
            <div class="empty_game_set">
                Nenhum Gerente.
            </div>
            {% endif %}
            <div class="row">
                <ul class="pagination">
                    <span class="step-links">                                                                     
                        {% if gerentes.has_previous%}
                            <li class="waves-effect"><a href="?page={{ gerentes.previous_page_number }}"><i class="material-icons">chevron_left</i></a></li>
                        {% endif %}                                    
                        
                        {%for page in page_range%}
                            {% if page == gerentes.number %}                                    
                                <li class="active" ><a href="?page={{page}}">{{page}}</a></li>
                            {% else %}
                                <li class="waves-effect"><a href="?page={{page}}">{{page}}</a></li>
                            {% endif %}
                        {%endfor%}                                

                        {% if gerentes.has_next%}
                            <li class="waves-effect"><a href="?page={{ gerentes.next_page_number }}"><i class="material-icons">chevron_right</i></a></li>
                        {% endif %}   
                    </span>                                                                   
                </ul>
            </div>
        </div>
    </div>     
</div> 
{% endblock %}

{% block right_section_desktop %}
{% endblock %}